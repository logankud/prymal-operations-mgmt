<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manufacturing Orders</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <!-- Navigation -->
    <a href="{{ url_for('home') }}" id="home-icon" style="text-decoration: none;">
        <div style="position: relative; display: inline-block; text-align: center; font-size: 24px; line-height: 1;">
            <span style="font-size: 16px; position: absolute; top: 0; left: 50%; transform: translateX(-50%);">
                Home
            </span>
            <span style="font-size: 24px; display: block; margin-top: 20px;">&#8962;</span>
        </div>
    </a>
    <h1>Production Management Dashboard</h1>

    <!-- Tabs for Navigation -->
    <div style="display: flex; gap: 20px; border-bottom: 1px solid #ccc; padding: 10px 0;">
        <a href="{{ url_for('manufacturing_orders') }}" 
               class="{{ 'active' if request.path == url_for('manufacturing_orders') else '' }}">Manufacturing Orders</a>
        <a href="{{ url_for('products') }}" 
           class="{{ 'active' if request.path == url_for('products') else '' }}">Products</a>
        <a href="{{ url_for('categories') }}" 
           class="{{ 'active' if request.path == url_for('categories') else '' }}">Categories</a>
        <a href="{{ url_for('flavors') }}" 
           class="{{ 'active' if request.path == url_for('flavors') else '' }}">Flavors</a>
        <a href="{{ url_for('sizes') }}" 
           class="{{ 'active' if request.path == url_for('sizes') else '' }}">Sizes</a>
        <a href="{{ url_for('vendors') }}" 
               class="{{ 'active' if request.path == url_for('vendors') else '' }}">Vendors</a>
        <a href="{{ url_for('raw_materials') }}" 
               class="{{ 'active' if request.path == url_for('raw_materials') else '' }}">Raw Materials</a>

    </div>
    <br><br>

    <!-- Add Manufacturing Order Button -->
    <a href="{{ url_for('add_manufacturing_order') }}">
        <button>Add Manufacturing Order</button>
    </a>
    <br><br>

    <!-- Manufacturing Orders Table -->
    <table border="1" cellpadding="5" cellspacing="0">
        <thead>
            <tr>
                <th>ID</th>
                <th>Product</th>
                <th>Units to Produce</th>
                <th>Planned Start Date</th>
                <th>Created At</th>
                <th>Updated At</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for order in manufacturing_orders %}
                <tr>
                    <td> <!-- Dropdown to transition status -->
                        <form action="{{ url_for('update_manufacturing_order_status', id=order[0]) }}" method="POST" style="display:inline;">
                            <select name="status" onchange="this.form.submit()">
                                <option value="Pending" {% if order[7] == 'Pending' %}selected{% endif %}>Pending</option>
                                <option value="In Progress" {% if order[7] == 'In Progress' %}selected{% endif %}>In Progress</option>
                                <option value="Complete" {% if order[7] == 'Complete' %}selected{% endif %}>Complete</option>
                            </select>
                        </form>
                    </td>
                    <td>{{ order[0] }}</td> <!-- ID -->
                    <td>{{ order[1] }}</td> <!-- Product Name -->
                    <td>{{ order[2] }}</td> <!-- Units to Produce -->
                    <td>{{ order[3] }}</td> <!-- Planned Start Date -->
                    <td>{{ order[4] }}</td> <!-- Created At -->
                    <td>{{ order[5] }}</td> <!-- Updated At -->
                    <td>
                        <!-- Edit Button -->
                        <a href="{{ url_for('edit_manufacturing_order', id=order[0]) }}">
                            <button>Edit</button>
                        </a>
                        <!-- Delete Button -->
                        <form action="{{ url_for('delete_manufacturing_order', id=order[0]) }}" method="POST" style="display:inline;">
                            <button type="submit" onclick="return confirm('Are you sure you want to delete this order?');">Delete</button>
                        </form>
                    </td>
                    
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Back to Home -->
    <br>
    <a href="{{ url_for('home') }}">Back to Home</a>
</body>
</html>
